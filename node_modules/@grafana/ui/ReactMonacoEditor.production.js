var e=require("./index.production.js"),r=require("react");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("@grafana/data"),require("react-inlinesvg"),require("react-dom"),require("@grafana/e2e-selectors"),require("moment"),require("tty"),require("util"),require("@grafana/schema"),require("jquery"),require("@grafana/aws-sdk");var t=n(r);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function u(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){u(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function p(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e){return r.reduceRight((function(e,r){return r(e)}),e)}}function f(e){return function r(){for(var n=this,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return o.length>=e.length?e.apply(this,o):function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(n,[].concat(o,t))}}}function d(e){return{}.toString.call(e).includes("Object")}function g(e){return"function"==typeof e}var y=f((function(e,r){throw new Error(e[r]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),h={changes:function(e,r){return d(r)||y("changeType"),Object.keys(r).some((function(r){return n=e,t=r,!Object.prototype.hasOwnProperty.call(n,t);var n,t}))&&y("changeField"),r},selector:function(e){g(e)||y("selectorType")},handler:function(e){g(e)||d(e)||y("handlerType"),d(e)&&Object.values(e).some((function(e){return!g(e)}))&&y("handlersType")},initial:function(e){var r;e||y("initialIsRequired"),d(e)||y("initialType"),r=e,Object.keys(r).length||y("initialContent")}};function v(e,r){return g(r)?r(e.current):r}function m(e,r){return e.current=l(l({},e.current),r),r}function b(e,r,n){return g(r)?r(e.current):Object.keys(n).forEach((function(n){var t;return null===(t=r[n])||void 0===t?void 0:t.call(r,e.current[n])})),n}var T={create:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.initial(e),h.handler(r);var n={current:e},t=f(b)(n,r),o=f(m)(n),i=f(h.changes)(e),a=f(v)(n);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return h.selector(e),e(n.current)}function u(e){p(t,o,i,a)(e)}return[c,u]}};var P,w={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},O=(P=function(e,r){throw new Error(e[r]||e.default)},function e(){for(var r=this,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return t.length>=P.length?P.apply(this,t):function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e.apply(r,[].concat(t,o))}})(w),j={config:function(e){var r;return e||O("configIsRequired"),r=e,{}.toString.call(r).includes("Object")||O("configType"),e.urls?(console.warn(w.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function M(e,r){return Object.keys(r).forEach((function(n){r[n]instanceof Object&&e[n]&&Object.assign(r[n],M(e[n],r[n]))})),a(a({},e),r)}var E={type:"cancelation",msg:"operation is manually canceled"};function k(e){var r=!1,n=new Promise((function(n,t){e.then((function(e){return r?t(E):n(e)})),e.catch(t)}));return n.cancel=function(){return r=!0},n}var S,q,R=T.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.28.1/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),C=(q=2,function(e){if(Array.isArray(e))return e}(S=R)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],t=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(t=(a=c.next()).done)&&(n.push(a.value),!r||n.length!==r);t=!0);}catch(e){o=!0,i=e}finally{try{t||null==c.return||c.return()}finally{if(o)throw i}}return n}}(S,q)||function(e,r){if(e){if("string"==typeof e)return c(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,r):void 0}}(S,q)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),I=C[0],V=C[1];function _(e){return document.body.appendChild(e)}function A(e){var r,n,t=I((function(e){return{config:e.config,reject:e.reject}})),o=(r="".concat(t.config.paths.vs,"/loader.js"),n=document.createElement("script"),r&&(n.src=r),n);return o.onload=function(){return e()},o.onerror=t.reject,o}function D(){var e=I((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),r=window.require;r.config(e.config),r(["vs/editor/editor.main"],(function(r){N(r),e.resolve(r)}),(function(r){e.reject(r)}))}function N(e){I().monaco||V({monaco:e})}var x=new Promise((function(e,r){return V({resolve:e,reject:r})})),z={config:function(e){V((function(r){return{config:M(r.config,j.config(e))}}))},init:function(){if(!I((function(e){return{isInitialized:e.isInitialized}})).isInitialized){if(window.monaco&&window.monaco.editor)return N(window.monaco),k(Promise.resolve(window.monaco));!function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e){return r.reduceRight((function(e,r){return r(e)}),e)}}(_,A)(D),V({isInitialized:!0})}return k(x)},__getMonacoInstance:function(){return I((function(e){return e.monaco}))}};const L={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};function F({content:e}){return t.default.createElement("div",{style:L},e)}const U={display:"flex",position:"relative",textAlign:"initial"},B={width:"100%"},Y={display:"none"};function $({width:e,height:r,isEditorReady:n,loading:o,_ref:i,className:a,wrapperClassName:c}){return t.default.createElement("section",{style:{...U,width:e,height:r},className:c},!n&&t.default.createElement(F,{content:o}),t.default.createElement("div",{ref:i,style:{...B,...!n&&Y},className:a}))}$.propTypes={width:e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.string]).isRequired,height:e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.string]).isRequired,loading:e.PropTypes.oneOfType([e.PropTypes.element,e.PropTypes.string]).isRequired,isEditorReady:e.PropTypes.bool.isRequired,className:e.PropTypes.string,wrapperClassName:e.PropTypes.string};var G=r.memo($);function H(e){r.useEffect(e,[])}function J(e,n,t=!0){const o=r.useRef(!0);r.useEffect(o.current||!t?()=>{o.current=!1}:e,n)}function K(){}function Q(e,r,n,t){return function(e,r){return e.editor.getModel(W(e,r))}(e,t)||function(e,r,n,t){return e.editor.createModel(r,n,t&&W(e,t))}(e,r,n,t)}function W(e,r){return e.Uri.parse(r)}e.PropTypes.string,e.PropTypes.string,e.PropTypes.string,e.PropTypes.string,e.PropTypes.string,e.PropTypes.string,e.PropTypes.string,e.PropTypes.bool,e.PropTypes.bool,e.PropTypes.string,e.PropTypes.oneOfType([e.PropTypes.element,e.PropTypes.string]),e.PropTypes.object,e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.string]),e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.string]),e.PropTypes.string,e.PropTypes.string,e.PropTypes.func,e.PropTypes.func;const X=new Map;function Z({defaultValue:e,defaultLanguage:n,defaultPath:o,value:i,language:a,path:c,theme:u,line:s,loading:l,options:p,overrideServices:f,saveViewState:d,keepCurrentModel:g,width:y,height:h,className:v,wrapperClassName:m,beforeMount:b,onMount:T,onChange:P,onValidate:w}){const[O,j]=r.useState(!1),[M,E]=r.useState(!0),k=r.useRef(null),S=r.useRef(null),q=r.useRef(null),R=r.useRef(T),C=r.useRef(b),I=r.useRef(null),V=r.useRef(i),_=function(e){const n=r.useRef();return r.useEffect((()=>{n.current=e}),[e]),n.current}(c);H((()=>{const e=z.init();return e.then((e=>(k.current=e)&&E(!1))).catch((e=>"cancelation"!==(null==e?void 0:e.type)&&console.error("Monaco initialization: error:",e))),()=>S.current?function(){var e,r;null===(e=I.current)||void 0===e||e.dispose(),g?d&&X.set(c,S.current.saveViewState()):null===(r=S.current.getModel())||void 0===r||r.dispose();S.current.dispose()}():e.cancel()})),J((()=>{const r=Q(k.current,e||i,n||a,c);r!==S.current.getModel()&&(d&&X.set(_,S.current.saveViewState()),S.current.setModel(r),d&&S.current.restoreViewState(X.get(c)))}),[c],O),J((()=>{S.current.updateOptions(p)}),[p],O),J((()=>{S.current.getOption(k.current.editor.EditorOption.readOnly)?S.current.setValue(i):i!==S.current.getValue()&&(S.current.executeEdits("",[{range:S.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),S.current.pushUndoStop())}),[i],O),J((()=>{k.current.editor.setModelLanguage(S.current.getModel(),a)}),[a],O),J((()=>{void 0!==s&&S.current.revealLine(s)}),[s],O),J((()=>{k.current.editor.setTheme(u)}),[u],O);const A=r.useCallback((()=>{C.current(k.current);const r=c||o,t=Q(k.current,i||e,n||a,r);S.current=k.current.editor.create(q.current,{model:t,automaticLayout:!0,...p},f),d&&S.current.restoreViewState(X.get(r)),k.current.editor.setTheme(u),j(!0)}),[e,n,o,i,a,c,p,f,d,u]);return r.useEffect((()=>{O&&R.current(S.current,k.current)}),[O]),r.useEffect((()=>{!M&&!O&&A()}),[M,O,A]),V.current=i,r.useEffect((()=>{var e,r;O&&P&&(null===(e=I.current)||void 0===e||e.dispose(),I.current=null===(r=S.current)||void 0===r?void 0:r.onDidChangeModelContent((e=>{const r=S.current.getValue();V.current!==r&&P(r,e)})))}),[O,P]),r.useEffect((()=>{if(O){const e=k.current.editor.onDidChangeMarkers((e=>{var r;const n=null===(r=S.current.getModel())||void 0===r?void 0:r.uri;if(n){if(e.find((e=>e.path===n.path))){const e=k.current.editor.getModelMarkers({resource:n});null==w||w(e)}}}));return()=>{null==e||e.dispose()}}}),[O,w]),t.default.createElement(G,{width:y,height:h,isEditorReady:O,loading:l,_ref:q,className:v,wrapperClassName:m})}Z.propTypes={defaultValue:e.PropTypes.string,defaultPath:e.PropTypes.string,defaultLanguage:e.PropTypes.string,value:e.PropTypes.string,language:e.PropTypes.string,path:e.PropTypes.string,theme:e.PropTypes.string,line:e.PropTypes.number,loading:e.PropTypes.oneOfType([e.PropTypes.element,e.PropTypes.string]),options:e.PropTypes.object,overrideServices:e.PropTypes.object,saveViewState:e.PropTypes.bool,keepCurrentModel:e.PropTypes.bool,width:e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.string]),height:e.PropTypes.oneOfType([e.PropTypes.number,e.PropTypes.string]),className:e.PropTypes.string,wrapperClassName:e.PropTypes.string,beforeMount:e.PropTypes.func,onMount:e.PropTypes.func,onChange:e.PropTypes.func,onValidate:e.PropTypes.func},Z.defaultProps={theme:"light",loading:"Loading...",options:{},overrideServices:{},saveViewState:!0,keepCurrentModel:!1,width:"100%",height:"100%",beforeMount:K,onMount:K,onValidate:K};var ee=r.memo(Z);function re(e,r){var n=function(e){return void 0===e?{}:{"editor.background":e.components.input.background,"minimap.background":e.colors.background.secondary}}(r);e.editor.defineTheme("grafana-dark",{base:"vs-dark",inherit:!0,colors:n,rules:[]}),e.editor.defineTheme("grafana-light",{base:"vs",inherit:!0,colors:n,rules:[]})}var ne=!1;exports.ReactMonacoEditor=function(n){var o,i=e.useTheme2(),a=function(){const[e,n]=r.useState(z.__getMonacoInstance());return H((()=>{let r;return e||(r=z.init(),r.then((e=>{n(e)}))),()=>{var e;return null===(e=r)||void 0===e?void 0:e.cancel()}})),e}();r.useEffect((function(){null!==a&&re(a,i)}),[a,i]),ne||(z.config({paths:{vs:(null!==(o=window.__grafana_public_path__)&&void 0!==o?o:"public/")+"lib/monaco/min/vs"}}),ne=!0,z.init().then((function(e){re(e)})));var c=i.isDark?"grafana-dark":"grafana-light";return t.default.createElement(ee,e.__assign({theme:c},n))};
//# sourceMappingURL=ReactMonacoEditor.production.js.map
